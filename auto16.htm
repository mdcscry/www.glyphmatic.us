<!DOCTYPE html> 
<html>
	<head>
		<title>Auto16</title>
		<style type="text/css">


			@import url('http://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Arimo|Cousine');


			@font-face {font-family: "Noto Emoji"; src: url(/tff/NotoEmoji-Regular.ttf);}
			@font-face {font-family: "Noto Sans Symbols"; src: url(/tff/NotoSansSymbols-Regular.ttf);}			
			@font-face {font-family: "Noto Sans Symbols2"; src: url(/tff/NotoSansSymbols2-Regular.ttf);}
			@font-face {font-family: "Noto Sans Mono"; src: url(/tff/NotoSansMono-Regular.ttf);}
			@font-face {font-family: "Noto Sans Display"; src: url(/tff/NotoSansDisplay-Regular.ttf);}	
			@font-face {font-family: "Noto Sans CJK SC"; src: url(/tff/NotoSansCJKsc-Regular.otf);}	
			@font-face {font-family: "Noto Sans Sinhala"; src: url(/tff/NotoSansSinhala-Regular.ttf);}	
			@font-face {font-family: "Noto Sans Devanagari"; src: url(/tff/NotoSansDevanagari-Regular.ttf);}
			@font-face {font-family: "Noto Sans Lao"; src: url(/tff/NotoSansLao-Regular.ttf);}			


			table { 
				border: 2px solid #110c11;
			}


			div {
				display: inline;
			}

			tr { line-height: 1em; }

		

			[title] {
				border-bottom: 1px solid rgba(0, 0, 0, 0.2);
				border-radius:1px;
				position: relative;
			}
			body.touched [title] > * {
				user-select: none;
			}
			body.touched [title]:hover > * {
				user-select: auto
			}
			body.touched [title]:hover:after {
				font-size:.15em;
				position: absolute;
				top: 100%;
				right: 0%;
				content: attr(title);
				border: 1px solid rgba(0, 0, 0, 0.2);
				background-color: white;
				padding: 0.1em;
				z-index: 1;
				color: black;
			}

			body { background-color: black;color: lightgray }


		</style>
		<script type ="text/JavaScript" src="./css_js/block_hex.js"></script>
		<script type ="text/JavaScript" src="./css_js/block_hex_desc.js"></script>
		<script type ="text/JavaScript" src="./css_js/block_lang_skeleton.js"></script>
	</head>
	<body>
	
		<table  align='center' width=75%>
			<tr class="glyph" id="row1">
				<TD id="row11" style="text-align:center" >
				</TD>
				<TD id="row12" style="text-align:center" >
				</TD>
				<TD id="row13" style="text-align:center" >
				</TD>
				<TD id="row14" style="text-align:center" >
				</TD>
			</tr>
			<tr class="desc" id="row1desc">
				<TD id="row11desc" style="text-align:center" >
				</TD>
				<TD id="row12desc" style="text-align:center" >
				</TD>
				<TD id="row13desc" style="text-align:center" >
				</TD>
				<TD id="row14desc" style="text-align:center" >
				</TD>
			</tr>					
		</table>	
										
	</body>

	<script type="text/javascript">



		var cssImportRule = document.createElement('style');
		var cssFontFamilyRule = document.createElement('style');	
		var cssFontFaceRule = document.createElement('style');		
		document.getElementsByTagName('body')[0].appendChild(cssImportRule);
		document.getElementsByTagName('body')[0].appendChild(cssFontFamilyRule);
		document.getElementsByTagName('body')[0].appendChild(cssFontFaceRule);		
		var cssImportStyle = document.styleSheets[1];
		var cssImportRules=cssImportStyle.cssRules;
		var cssFontFamilyStyle = document.styleSheets[2];
		var cssFontFamilyRules=cssFontFamilyStyle.cssRules;
		var cssFontFaceStyle = document.styleSheets[3];
		var cssFontFaceRules=cssFontFaceStyle.cssRules;		

		document.body.addEventListener('touchstart', function() {
  			document.body.classList.add('touched');
		});
		//console.log("cssImportRules: "+  cssImportRules.length)

		function attach_goog_font(font){
			gf_prefix = '//fonts.googleapis.com/css?family='
            font_formatted = font.replace(/ /g,"+")
            	//console.log("font_formatted: ",font_formatted)
			newRule='@import url(http:'+ gf_prefix + font_formatted+');';
				//console.log("import: " + newRule)
			cssImportStyle.insertRule(newRule,cssImportRules.length);	
		}

		function attach_an_early_access_font(font){
			//https://fontlibrary.org/
			font = font.split("-")[0]
            ea_prefix = '//fonts.googleapis.com/earlyaccess/'
            font_formatted = font.replace(/ /g,"").toLowerCase()
            	//console.log("font_formatted: ",font_formatted)
			newRule = '@import url(http:'+ ea_prefix + font_formatted + '.css);';
			cssImportStyle.insertRule(newRule,cssImportRules.length);
	 	}



	 	function attach_local_font(font,filetype){
			//https://fontlibrary.org/
			font = font.split("-")[0]
				 //console.log("font: ",font)
            font_formatted = font.replace(/ /g,"")
            	 console.log("font_formatted: ",font_formatted)
			newRule = "@font-face {font-family: " + font + "; src: url(" + '/tff/' + font_formatted + '-Regular'+ filetype +');}'
				//console.log(newRule)
			cssFontFaceStyle.insertRule(newRule,cssFontFaceRules.length);
	 	}


		function attach_font_family(font,spid){

			console.log("infontfamily: "+font)
			if (font=='maya'){ fontsize='3.75em' }else{ fontsize='2.75em' }

			var newRule = "font-family: '"+ font +"','Noto Emoji','Noto Sans Symbols','Noto Sans Symbols2'" +",'Noto Sans','Arimo','Cousine','Noto Sans Sinhala','Noto Sans CJK SC','Noto Sans Devanagari','Noto Sans Lao';font-size: "+ fontsize + ";"

			console.log("font-face: " + newRule)	
			sid = "span#sid"+i
			cssFontFamilyStyle.addRule(sid,newRule,0);
		}

	 	function attach_network_font(font,url){
	 		font = font.replace(/_/g,"-")

			var fileref = document.createElement("link");
				fileref.rel = "stylesheet";
				fileref.type = "text/css";				
				fileref.href = "https://fontlibrary.org/face/"+ font;
				document.getElementsByTagName("head")[0].appendChild(fileref)
	 		console.log(fileref)
	 	}


		function git_the_random(seed,array){
			val = Math.round((array[seed].length-1)*Math.random())
			//console.log("val: "+val)
			return(val)
		}	

	

	 	function spectacular(start,number_of_glyphs) {
	 		spans_string = ''
	 		glyph_val = ''

	 		for (i=start ; i <= start+number_of_glyphs ;i++){	
 			
		 			random_number = Math.round((blocks.length-1)*Math.random())
		 			block = blocks[random_number] 

		 				//console.log(random_number)
		 				//console.log(block)

		 				glyph_val = git_the_random(block,block_hex)		
		 					

					glyph = block_hex[block][glyph_val]
						//console.log(glyph)
					glyph_desc = block_hex_desc[block][glyph_val].replace(/ /g,"_")

					font_du_jour = get_more_spectacular(block)
					
					if (font_du_jour.split("-")[1]=='EA'){
						attach_an_early_access_font(font_du_jour)
					} else if (font_du_jour.split("-")[1]=='local'){
						//console.log("in")
						attach_local_font(font_du_jour.split("-")[0],'.ttf')	
					} else if (font_du_jour.split("-")[1]=='cjk'){
						//console.log("in")
						attach_local_font(font_du_jour.split("-")[0],'.otf')	
					} else if (font_du_jour.split("-")[1]=='fontlibrary'){
						//console.log("in")
						attach_network_font(font_du_jour.split("-")[0],'https://fontlibrary.org/face/')	

						if (font_du_jour.split("-")[0]=='cretan_hieroglyphs'){
							font_du_jour = 'CretanHieroglyphsRegular-fontlibrary'	
						} else if (font_du_jour.split("-")[0]=='cypro_minoan'){
							font_du_jour = 'CyproMinoanRegular-fontlibrary'	
						}
					} else {
						attach_goog_font(font_du_jour)	
					}	
		

					attach_font_family(font_du_jour.split("-")[0],i)
				

		 			returnArray[0] = "&#x" + glyph + ";";
		 			returnArray[1] = glyph_desc
				}
			return(returnArray)
	 	}


	 	function get_more_spectacular(block){

		 		font_array = block_lang[block]
		 		console.log(block + ':' +font_array)

		 		super_font_seed = Math.round((font_array.length-1)*Math.random())
		 		//console.log("super_font_seed: " + super_font_seed)
		 		font_lookup = font_array[super_font_seed]
	 				console.log("font_lookup: " + font_lookup)
	 				//console.log("lang_font: " + lang_font[font_lookup])	
		 		font_seed = Math.round((lang_font[font_lookup].length-1)*Math.random())
		 			console.log("font_seed: " + 	font_seed)		 		
		 		font = lang_font[font_lookup][font_seed]
		 			//console.log("font: ",font)
	 			return(font)	
	 	}	 		

	    
	    number_of_glyphs = 1;

	    var row11=document.getElementById('row11');
	        row11.innerHTML= spectacular(11,number_of_glyphs);
	 	var row12=document.getElementById('row12');
	 		row12.innerHTML= spectacular(12,number_of_glyphs);
	 	var row13=document.getElementById('row13');
	        row13.innerHTML= spectacular(13,number_of_glyphs);		 	
	 	var row14=document.getElementById('row14');
	        row14.innerHTML= spectacular(14,number_of_glyphs);		 	

	    var row11desc=document.getElementById('row11desc');
	        row11desc.innerHTML= spectacular(11,number_of_glyphs);
	 	var row12desc=document.getElementById('row12desc');
	 		row12desc.innerHTML= spectacular(12,number_of_glyphs);
	 	var row13desc=document.getElementById('row13desc');
	        row13desc.innerHTML= spectacular(13,number_of_glyphs);		 	
	 	var row14desc=document.getElementById('row14desc');
	        row14desc.innerHTML= spectacular(14,number_of_glyphs);	 	

	</script>

</html>