<!DOCTYPE html> 
<html>
	<head>
		<title>Auto4-all</title>
		<style type="text/css">


			@import url('http://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Arimo|Cousine');


			@font-face {font-family: "Noto Emoji"; src: url(/tff/NotoEmoji-Regular.ttf);}
			@font-face {font-family: "Noto Sans Symbols"; src: url(/tff/NotoSansSymbols-Regular.ttf);}			
			@font-face {font-family: "Noto Sans Symbols2"; src: url(/tff/NotoSansSymbols2-Regular.ttf);}
			@font-face {font-family: "Noto Sans Mono"; src: url(/tff/NotoSansMono-Regular.ttf);}
			@font-face {font-family: "Noto Sans Display"; src: url(/tff/NotoSansDisplay-Regular.ttf);}	
			@font-face {font-family: "Noto Sans CJK SC"; src: url(/tff/NotoSansCJKsc-Regular.otf);}	
			@font-face {font-family: "Noto Sans Sinhala"; src: url(/tff/NotoSansSinhala-Regular.ttf);}	
			@font-face {font-family: "Noto Sans Devanagari"; src: url(/tff/NotoSansDevanagari-Regular.ttf);}
			@font-face {font-family: "Noto Sans Lao"; src: url(/tff/NotoSansLao-Regular.ttf);}			


			table { width:55%;
					border-bottom:50px solid #cdc9c9;
					border-radius:20px;	
	
			}


			div {
				display: inline;
			}

			td {
  				border-bottom:2pt dotted white;
  
			}


			[title] {
				border-bottom: 1px solid white;
				border-radius:1px;
				position: relative;
			}
			body.touched [title] > * {
				user-select: none;
			}
			body.touched [title]:hover > * {
				user-select: auto
			}
			body.touched [title]:hover:after {
				font-size:.15em;
				position: absolute;
				top: 100%;
				right: 0%;
				content: attr(title);
				border: 1px solid rgba(0, 0, 0, 0.2);
				background-color: white;
				padding: 0.1em;
				z-index: 1;
				color: black;
			}

			body { background-color: white; }


		</style>
		<script type ="text/JavaScript" src="./css_js/block_hex.js"></script>
		<script type ="text/JavaScript" src="./css_js/block_hex_desc.js"></script>
		<script type ="text/JavaScript" src="./css_js/block_lang_skeleton.js"></script>
	</head>
	<body style="overflow: hidden;font-size: 1.9em;display: inline;">
	
		<table  id="tab" align='center' width=80%>
			<tr >
				<TD id="row1" style="text-align:center" colspan=3 >
				</TD>
			</tr>
			<tr>
				<TD id="row2" style="text-align:center" colspan=3 >

			</tr>
			<tr>	
				<TD id="row3" style="text-align:center" colspan=3>
				</TD>				
			</tr>
			<tr class="border_bottom">
				<TD id="row4" style="text-align:center" colspan=3>
				</TD>	
			</tr>			
			<tr>
				<TD id="row5" style="text-align:center" colspan=3>
				</TD>
			</tr>
			<tr >
				<td width=33%></td>
				<td width=33% style='text-align:center;'>
					<div id="unidesc" class="description" style="font-size:.8em;font-family:'Noto Sans Mono'"> &nbsp;&nbsp;Unicode</div>
				</td>

				<td width=33% style="text-align:right;">
					<div id = "glyphfoot" class="description" style="font-size:.6em;font-family:'Noto Sans Mono';"> glyphmatic.us</div>
				</td>
			</tr>
		</table>	
										
	</body>

	<script type="text/javascript">



		var cssImportRule = document.createElement('style');
		var cssFontFamilyRule = document.createElement('style');	
		var cssFontFaceRule = document.createElement('style');		
		document.getElementsByTagName('body')[0].appendChild(cssImportRule);
		document.getElementsByTagName('body')[0].appendChild(cssFontFamilyRule);
		document.getElementsByTagName('body')[0].appendChild(cssFontFaceRule);		
		var cssImportStyle = document.styleSheets[1];
		var cssImportRules=cssImportStyle.cssRules;
		var cssFontFamilyStyle = document.styleSheets[2];
		var cssFontFamilyRules=cssFontFamilyStyle.cssRules;
		var cssFontFaceStyle = document.styleSheets[3];
		var cssFontFaceRules=cssFontFaceStyle.cssRules;		

		document.body.addEventListener('touchstart', function() {
  			document.body.classList.add('touched');
		});
		//console.log("cssImportRules: "+  cssImportRules.length)

		var mycolors=["#CD5C5C","#96cdcd"
		,"#cdc9c9"
		,"#cdc9c9","#cdc9c9","#cdc9c9"
		,"#cdc9c9","#8A8A8A","#7f7f7f","#CD5C5C","#96cdcd","#CD5C5C"
		];



		function randn_bm() {
		    let u = 0, v = 0;
		    while(u === 0) u = Math.random(); //Converting [0,1) to (0,1)
		    while(v === 0) v = Math.random();
		    let num = Math.sqrt( -4.0 * Math.log( u ) ) * Math.cos( 2.0 * Math.PI * v );
		    num = num / 10.0 + 0.5; // Translate to 0 -> 1
		    if (num > 1 || num < 0) return randn_bm(); // resample between 0 and 1
		    return num;
		}




	    var footdesc = document.getElementById("unidesc");
	    var footglyph = document.getElementById("glyphfoot");
		var bb = document.getElementsByTagName("td")
		var table = document.getElementById("tab");


	    bb[4].style.borderBottomColor = mycolors[Math.round(randn_bm()*mycolors.length-1)] 
	    table.style.borderBottomColor = mycolors[Math.round(randn_bm()*mycolors.length-1)] 
	    footdesc.style.color =  mycolors[Math.round(randn_bm()*mycolors.length-1)] 
	    footglyph.style.color =  mycolors[Math.round(randn_bm()*mycolors.length-1)] 




		function attach_goog_font(font){
			gf_prefix = '//fonts.googleapis.com/css?family='
            font_formatted = font.replace(/ /g,"+")
            	//console.log("font_formatted: ",font_formatted)
			newRule='@import url(http:'+ gf_prefix + font_formatted+');';
				//console.log("import: " + newRule)
			cssImportStyle.insertRule(newRule,cssImportRules.length);	
		}

		function attach_an_early_access_font(font){
			//https://fontlibrary.org/
			font = font.split("-")[0]
            ea_prefix = '//fonts.googleapis.com/earlyaccess/'
            font_formatted = font.replace(/ /g,"").toLowerCase()
            	//console.log("font_formatted: ",font_formatted)
			newRule = '@import url(http:'+ ea_prefix + font_formatted + '.css);';
			cssImportStyle.insertRule(newRule,cssImportRules.length);
	 	}



	 	function attach_local_font(font,filetype){
			//https://fontlibrary.org/
			font = font.split("-")[0]
				 //console.log("font: ",font)
            font_formatted = font.replace(/ /g,"")
            	 console.log("font_formatted: ",font_formatted)
			newRule = "@font-face {font-family: " + font + "; src: url(" + '/tff/' + font_formatted + '-Regular'+ filetype +');}'
				//console.log(newRule)
			cssFontFaceStyle.insertRule(newRule,cssFontFaceRules.length);
	 	}


		function attach_font_family(font,spid){

			console.log("infontfamily: "+font)
			if (font=='maya'){ fontsize='3.75em' }else{ fontsize='2.75em' }

			var newRule = "font-family: '"+ font +"','Noto Emoji','Noto Sans Symbols','Noto Sans Symbols2'" +",'Noto Sans','Arimo','Cousine','Noto Sans Sinhala','Noto Sans CJK SC','Noto Sans Devanagari','Noto Sans Lao';font-size: "+ fontsize + ";"
			numma = randn_bm()
			//console.log(numma)
			muchRandomness = Math.abs(Math.round(randn_bm()*mycolors.length-1))
			console.log(muchRandomness)
			newRule += newRule + "color: " + mycolors[muchRandomness] + ";"

			console.log("font-face: " + newRule)	
			sid = "span#sid"+i
			cssFontFamilyStyle.addRule(sid,newRule,0);
		}

	 	function attach_network_font(font,url){
	 		font = font.replace(/_/g,"-")

			var fileref = document.createElement("link");
				fileref.rel = "stylesheet";
				fileref.type = "text/css";				
				fileref.href = "https://fontlibrary.org/face/"+ font;
				document.getElementsByTagName("head")[0].appendChild(fileref)
	 		console.log(fileref)
	 	}


		function git_the_random(seed,array){
			val = Math.round((array[seed].length-1)*Math.random())
			//console.log("val: "+val)
			return(val)
		}	

	

	 	function spectacular(start,number_of_glyphs) {
	 		spans_string = ''
	 		glyph_val = ''

	 		for (i=start ; i <= start+number_of_glyphs ;i++){	
 			
		 			random_number = Math.round((blocks.length-1)*Math.random())
		 			block = blocks[random_number] 

		 				//console.log(random_number)
		 				//console.log(block)

		 				glyph_val = git_the_random(block,block_hex)		
		 					

					glyph = block_hex[block][glyph_val]
						//console.log(glyph)
					glyph_desc = block_hex_desc[block][glyph_val].replace(/ /g,"_")

					font_du_jour = get_more_spectacular(block)
					
					if (font_du_jour.split("-")[1]=='EA'){
						attach_an_early_access_font(font_du_jour)
					} else if (font_du_jour.split("-")[1]=='local'){
						//console.log("in")
						attach_local_font(font_du_jour.split("-")[0],'.ttf')	
					} else if (font_du_jour.split("-")[1]=='cjk'){
						//console.log("in")
						attach_local_font(font_du_jour.split("-")[0],'.otf')	
					} else if (font_du_jour.split("-")[1]=='fontlibrary'){
						//console.log("in")
						attach_network_font(font_du_jour.split("-")[0],'https://fontlibrary.org/face/')	

						if (font_du_jour.split("-")[0]=='cretan_hieroglyphs'){
							font_du_jour = 'CretanHieroglyphsRegular-fontlibrary'	
						} else if (font_du_jour.split("-")[0]=='cypro_minoan'){
							font_du_jour = 'CyproMinoanRegular-fontlibrary'	
						}
					} else {
						attach_goog_font(font_du_jour)	
					}	
		

					attach_font_family(font_du_jour.split("-")[0],i)
				

		 		spans_string = spans_string + "<td><span id='sid"+ i + "' title='" + glyph + "-" + glyph_desc + "'>&#x" + glyph + ";</span></td>";
				}
			return(spans_string)
	 	}


	 	function get_more_spectacular(block){

		 		font_array = block_lang[block]
		 		console.log(block + ':' +font_array)

		 		super_font_seed = Math.round((font_array.length-1)*Math.random())
		 		//console.log("super_font_seed: " + super_font_seed)
		 		font_lookup = font_array[super_font_seed]
	 				console.log("font_lookup: " + font_lookup)
	 				//console.log("lang_font: " + lang_font[font_lookup])	
		 		font_seed = Math.round((lang_font[font_lookup].length-1)*Math.random())
		 			console.log("font_seed: " + 	font_seed)		 		
		 		font = lang_font[font_lookup][font_seed]
		 			//console.log("font: ",font)
	 			return(font)	
	 	}	 		

	    
	    number_of_glyphs = 20;
	    var row_1=document.getElementById('row1');
	        row_1.innerHTML= spectacular(0,number_of_glyphs-1);
	 	var row_2=document.getElementById('row2');
	 		row_2.innerHTML= spectacular(number_of_glyphs,number_of_glyphs-1);
	 	var row_3=document.getElementById('row3');
	        row_3.innerHTML= spectacular(number_of_glyphs*2,number_of_glyphs-1);		 	
	 	var row_4=document.getElementById('row4');
	        row_4.innerHTML= spectacular(number_of_glyphs*3,number_of_glyphs-1);		 	
	 	var row_5=document.getElementById('row5');
	        row_5.innerHTML= spectacular(number_of_glyphs*4,number_of_glyphs-1);		 	

	</script>

</html>